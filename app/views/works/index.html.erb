<main>
  <h2>List of Works</h2>

<% if @works.length > 0 %>

<!--  TODO: Update to include vote count when initialized-->

  <h4>Albums</h4>
  <table>
    <tr>
      <th>Votes</th>
      <th>Title</th>
      <th>Created By</th>
      <th>Published</th>
      <th>Upvote</th>
    </tr>

    <% @works.by_category("album").each do |work| %>
      <tr>
        <td><%= work.votes_count.nil? ? "0" : work.votes_count %></td>
        <td><%= link_to work.title, work_path(work.id)%></td>
        <td><%= work.creator %></td>
        <td><%= work.publication_year %></td>
        <td><%= link_to "Upvote", upvote_path(work), method: :post, class: "btn btn-primary" %></td>
      </tr>
    <% end %>
  </table>

  <br>

  <h4>Books</h4>
  <table>
    <tr>
      <th>Votes</th>
      <th>Title</th>
      <th>Created By</th>
      <th>Published</th>
      <th>Upvote</th>
    </tr>
    <% @works.by_category("book").each do |work| %>
      <tr>
        <td><%= work.votes_count.nil? ? "0" : work.votes_count %></td>
        <td><%= link_to work.title, work_path(work.id)%></td>
        <td><%= work.creator %></td>
        <td><%= work.publication_year %></td>
        <td><%= link_to "Upvote", upvote_path(work), method: :post, class: "btn btn-primary" %></td>
      </tr>
    <% end %>
  </table>

  <br>

  <h4>Movies</h4>
  <table>
    <thead>
    <tr>
      <th>Votes</th>
      <th>Title</th>
      <th>Created By</th>
      <th>Published</th>
      <th>Upvote</th>
    </tr>
    </thead>
    <tbody>
    <% @works.by_category("movie").each do |work| %>
      <tr>
        <td><%= work.votes_count.nil? ? "0" : work.votes_count %></td>
        <td><%= link_to work.title, work_path(work.id)%></td>
        <td><%= work.creator %></td>
        <td><%= work.publication_year %></td>
        <td><%= link_to "Upvote", upvote_path(work), method: :post, class: "btn btn-primary" %></td>
      </tr>
    <% end %>
    </tbody>
  </table>

<% else %>
  <p>No media in the system!</p>
<% end %>
</main>