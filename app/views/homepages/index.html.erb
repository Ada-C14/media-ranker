<main>
  <section class="spotlight">
    <h2 class="spotlight__header">
      <span class="spotlight__header--prefix">
        Media Spotlight:
      </span>
      <% top_work = Work.all.filter { |work| work.category == "movie" }.max_by { |movie| movie.votes.length} %>
      <%= link_to top_work.title, work_path(top_work.id), class: "spotlight__link-to" %> by <%= top_work.creator %>
    </h2>
    <p><%= top_work.votes.length %> votes - <%= top_work.description %></p>
  </section>
  <section class="top=ten__list-container">
    <h2 class="top-ten__header">Top Movies</h2>
    <ul class="list-group top-ten__list">
      <% Work.all.filter { |work| work.category == "movie"}.max_by(10) { |movie| movie.votes.length}.each do |movie| %>
        <li class="list-group-item">
          <h4><%= link_to movie.title, work_path(movie.id) %> <small class="top-ten__creator">by <%= movie.creator %></small></h4>
          <p><%= movie.votes.length %> votes</p>
        </li>
      <% end %>
    </ul>
  </section>

  <section class="top=ten__list-container">
    <h2 class="top-ten__header">Top Books</h2>
    <ul class="list-group top-ten__list">
      <% Work.all.filter { |work| work.category == "book"}.max_by(10) { |book| book.votes.length}.each do |book| %>
        <li class="list-group top-ten__list">
          <h4><%= link_to book.title, work_path(book.id) %> <small class="top-ten__creator">by <%= book.creator %></small></h4>
          <p><%= book.votes.length %> votes</p>
        </li>
      <% end %>
    </ul>
  </section>

  <section class="top=ten__list-container">
    <h2 class="top-ten__header">Top Albums</h2>
    <ul class="list-group top-ten__list">
      <% Work.all.filter { |work| work.category == "album"}.max_by(10) { |album| album.votes.length}.each do |album| %>
        <li class="list-group top-ten__list">
          <h4><%= link_to album.title, work_path(album.id) %> <small class="top-ten__creator">by <%= album.creator %></small></h4>
          <p><%= album.votes.length %> votes</p>
        </li>
      <% end %>
    </ul>
  </section>
</main>
