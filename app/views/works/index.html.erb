<% @work = Work.all
    @movies = @work.where(category: "movie")
    @books = @work.where(category: "book")
    @albums = @work.where(category: "album") %>
<h1>List of Works</h1>
<h4>Albums</h4>

<table class="table">
  <thead>
  <tr>
    <th scope="col">Votes</th>
    <th scope="col">Title</th>
    <th scope="col">Created By</th>
    <th scope="col">Published</th>
    <th scope="col">Upvote</th>
  </tr>
  </thead>
  <tbody>
  <% @albums.each do |album|  %>
  <tr>
    <td><%= album.votes.size %></td>
    <td><%= link_to album.title, work_path(album.id)  %></td>
    <td><%=  album.creator %></td>
    <td><%=  album.publication_year %></td>
    <td><%= button_to "Upvote", work_upvote_path(album),
                      method: "post", class: "btn btn-info", id:"btn3" %></td>
  <% end %>
  </tbody>
</table>

<h4>Books</h4>

<table class="table">
  <thead>
  <tr>
    <th scope="col">Votes</th>
    <th scope="col">Title</th>
    <th scope="col">Created By</th>
    <th scope="col">Published</th>
    <th scope="col">Upvote</th>
  </tr>
  </thead>
  <tbody>
  <% @books.each do |book|  %>
    <tr>
      <td><%= book.votes.size %></td>
      <td><%= link_to book.title, work_path(book.id)%></td>
      <td><%=  book.creator %></td>
      <td><%=  book.publication_year %></td>
      <td><%= button_to "Upvote", work_upvote_path(@work),
                        method: "post", class: "btn btn-info", id:"btn3" %></td>
  <% end %>
  </tbody>
</table>

<h4>Movies</h4>

<table class="table">
  <thead>
  <tr>
    <th scope="col">Votes</th>
    <th scope="col">Title</th>
    <th scope="col">Created By</th>
    <th scope="col">Published</th>
    <th scope="col">Upvote</th>
  </tr>
  </thead>
  <tbody>
  <% @movies.each do |movie|  %>
    <tr>
      <td><%= movie.votes.size %></td>
      <td><%= link_to movie.title, work_path(movie.id)%></td>
      <td><%=  movie.creator %></td>
      <td><%=  movie.publication_year %></td>
      <td> <%= button_to "Upvote", work_upvote_path(@work),
                         method: "post", class: "btn btn-info", id:"btn3" %></td>
  <% end %>
  </tbody>
</table>

<%= button_to "View top media", homepage_path,
              method: "get", class: "btn btn-info index_btn", id:"gray_btn" %>

<%= button_to "Add a new work", new_work_path,
              method: "get", class: "btn btn-info index_btn", id: "btn5" %>