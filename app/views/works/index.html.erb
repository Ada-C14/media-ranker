
<main>
  <h2>List of Works</h2>

  <% categories.each do |category|%>
    <section class="media-table">
      <h4><%=category.capitalize%>s</h4>
      <table class="table">
        <thead>
          <tr>
            <th width="80">Votes</th>
            <th>Title</th>
            <th>Created By</th>
            <th width="100">Published</th>
            <th width="100">Upvote</th>
         </tr>
        </thead>
        <tbody>
          <%@works.where(category: category).each do |work|%>
            <%= render partial: "table_data", locals: { data: [work.votes.count,
                                                                   link_to(work.title, work_path(work.id)),
                                                                   work.creator,
                                                                   work.publication_date,
                                                                   link_to("Upvote", upvote_work_path(work.id), method: :post, class: "btn btn-primary")]}%>

          <%end%>

        </tbody>
      </table>
    </section>
  <%end%>

  <a class="btn btn-secondary" href="/">View top media</a>
  <a class="btn btn-primary" href="/works/new">Add a new work</a>

</main>


